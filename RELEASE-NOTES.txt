= SWMTBot release notes =


== SWMTBot 1.20.0 ==

THIS IS NOT A RELEASE YET

Those wishing to use the trunk code instead of a stable release can obtain
it from source control: https://svn.toolserver.org/svnroot/p_swmtbot

=== Changes in 1.20.0 ===

* "the end of time" is now controlled by Console.msgs to allow translation
* newuser/newuser2 event gets a 'talkurl' attribute.
* Delete event gets a 'url' attribute.
* Actions now have a clean-attribute without prefixes ('c' + attrname) besides
  the regular one, for more flexibility in the layout of the messages
  So [[${editor}]] renders "[[xx:User:Foo]]") and ${ceditor} renders "Foo".
* (bug 15) Add 'talkurl' attribute for block and unblock event.
* (bug 31) Support for protect/unprotect log type and the (new) modifyprotect.
* Added SWMTBot.exe.config to the SVN. For some reason it was on the botserver
  but never made it here (this file is required to get the output of log4net.
  ie. to terminal or run.log file).
* ignoreBotEdits is now deprecated in favor of feedFilterUsersBot
* RCEvent now extracts botflag aswell. Making it possible to detect (and return)
  botedits in ReactToRCEvent without a database connection (ie.
  calling classifyEditor). This decreases delay/lag on busy wikis noticeably.
* Adding Console.msgs and sqlite3.dll as Content includes. No longer have to be
  moved manually before the app can be run.

=== New features in 1.20.0 ===

* (bug 12) Trim whitespace around parameter when dealing with ListManager.
* (bug 29) New feed filters added: feedFilterUsersAnon, feedFilterUsersReg
  feedFilterUsersBot, feedFilterEventMinorEdit, feedFilterEventEdit, 
  feedFilterEventNewpage, feedFilterEventMove, feedFilterEventDelete, 
  feedFilterEventNewuser, feedFilterEventUpload and feedFilterEventProtect.
  These can be set in SWMTBot.ini to 1, 2, 3 or 4.
  Check the bug ticket and code comments for more info.
* (bug 30) New option to prevent dbconnection in ListManager.ClassifyEditor
  Can now be done by adding setting disableClassifyEditor in SWMTBot.ini.
* (bug 27) New command "config" for getting the customizable .ini settings
  optional parameter 'all' to broadcast it (like "count" does by default)
  causing all other bots in the same channel to also show their configs.

=== Bug fixes in 1.20.0 ===

* SWMTUtils.wikiEncode() now encodes exclamation mark aswell (some IRC clients
  cut off links that ends with it).
* (bug 11) added missing clean-attributes for EventType edit and newpage 
* (bug 16) Remove deprecated {ipcat}.
* added "patrol" (mark as patrolled) and "review" (FlaggedRevs/PendingChanges)
  as an empty switchcase in RCReader->rcirc_OnChannelMessage to clear out some
  unnecessary WARNs about unhandled log types.
* (bug 6) Pagetitles containing a slash were not reported
  and cause a WARN in log.
* nsEnglish[4] and nsEnglish[5] have been changed from "Wikipedia" to "Project"
  to fix the bug where one could watchlist project-ns page of a non-WP project,
  but when an edit occurs, the generated pagetitle (and url) gets the wrong
  namespace and thus resulted in a broken (404 error) link.
  "Project" works everywhere.

== Compatibility & Upgrading ==

The old deprecated {ipcat} attribute (which previously was manually set to an
empty string) has been removed from the Program and Console.msgs.
Also message 05902 is added for modifyprotect log type.
Make sure that if you use an altered version of Console.msgs you view the 
difference between this release's Console.msgs your release in FishEye
and add/change lines accordingly.

Lists.sqlite and SWMTBot.ini remain unchanged and are totally compatible.
They don't need any upgrading.

Because bug 6 has been fixed Projects.xml needs to be rebuild in order to
actually see it fixed. It's not a requirement (bot will work as before without
rebuilding). You can rebuild doing the "batchreload" command.
Keep in mind that reload will take up to 2 seconds per loaded wiki.

All other files can simply be replaced, and the bot restarted.

So summarized:
* Quit the bot
* If you have a custom Console.msgs get diff in FishEye and do the same,
  otherwise just replace that file with the new version
* Replace all other files except for Projects.xml and SWMTBot.ini
* After restarting run batchreload to update Projects.xml
* Enjoy!


For notes on 1.19.0 and older releases, see HISTORY


=== Online documentation ===

Documentation for both users and channel operators is currently available
on Meta :

  http://meta.wikimedia.org/wiki/SWMTBot


=== IRC help ===

There's usually someone online in #countervandalism on irc.freenode.net